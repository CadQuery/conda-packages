parameters:
  name: 'Build job'  
  vmImage: 'Ubuntu-16.04'

jobs:
- job: ${{ parameters.name }}
  timeoutInMinutes: 120
  
  pool: 
    vmImage: ${{ parameters.vmImage }}
  
  steps:
  - task: CondaEnvironment@1
    inputs:
      createCustomEnvironment: False
      updateConda: False
      packageSpecs: conda-build=3.0.22 conda-verify libarchive python=3
      installOptions: --channel conda-forge
  
  - script: conda info && conda list
    displayName: 'Conda info'
  
  - script: cd oce-0.18.3 && conda build -c conda-forge -c dlr-sc . && cd ..
    displayName: 'OCE'
          
  - bash: cd pythonocc && conda build -c conda-forge -c dlr-sc . && cd ..
    displayName: 'PythonOCC'